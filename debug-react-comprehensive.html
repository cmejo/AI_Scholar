<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç React Debug - Comprehensive Analysis</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 20px;
            background: #0a0a0a;
            color: #00ff00;
            line-height: 1.6;
        }
        .debug-section {
            background: #1a1a1a;
            border: 1px solid #333;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .error { color: #ff4444; }
        .success { color: #44ff44; }
        .warning { color: #ffaa44; }
        .info { color: #4444ff; }
        iframe {
            width: 100%;
            height: 400px;
            border: 2px solid #333;
            background: white;
            margin: 10px 0;
        }
        pre {
            background: #000;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
        .test-button {
            background: #333;
            color: white;
            border: 1px solid #666;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #444;
        }
    </style>
</head>
<body>
    <h1>üîç AI Scholar React Debug Analysis</h1>
    
    <div class="debug-section">
        <h2>üìã Debug Checklist</h2>
        <div id="checklist">
            <p>‚è≥ Running comprehensive checks...</p>
        </div>
    </div>

    <div class="debug-section">
        <h2>üåê Application Preview</h2>
        <iframe id="app-frame" src="http://localhost:8080"></iframe>
        <div>
            <button class="test-button" onclick="reloadFrame()">üîÑ Reload Frame</button>
            <button class="test-button" onclick="checkConsole()">üìù Check Console</button>
            <button class="test-button" onclick="analyzeDOM()">üîç Analyze DOM</button>
        </div>
    </div>

    <div class="debug-section">
        <h2>üìä Analysis Results</h2>
        <div id="analysis-results">
            <p>Click "Analyze DOM" to start analysis...</p>
        </div>
    </div>

    <div class="debug-section">
        <h2>üîß Quick Fixes</h2>
        <div>
            <button class="test-button" onclick="testBasicReact()">üß™ Test Basic React</button>
            <button class="test-button" onclick="testRAGOnly()">üß† Test RAG Only</button>
            <button class="test-button" onclick="testMinimal()">‚ö° Test Minimal</button>
        </div>
    </div>

    <script>
        let debugResults = {
            htmlLoaded: false,
            jsLoaded: false,
            reactMounted: false,
            rootElement: false,
            errors: []
        };

        function reloadFrame() {
            document.getElementById('app-frame').src = 'http://localhost:8080?' + Date.now();
        }

        function checkConsole() {
            // This would check console errors if we had access
            updateResults('Console check initiated - check browser dev tools for errors');
        }

        function analyzeDOM() {
            const iframe = document.getElementById('app-frame');
            setTimeout(() => {
                try {
                    const doc = iframe.contentDocument || iframe.contentWindow.document;
                    const root = doc.getElementById('root');
                    const scripts = doc.querySelectorAll('script');
                    const title = doc.title;
                    
                    let analysis = '<h3>üîç DOM Analysis Results</h3>';
                    
                    // Check HTML structure
                    analysis += '<h4>HTML Structure:</h4>';
                    analysis += `<p class="info">Title: ${title}</p>`;
                    analysis += `<p class="info">Scripts found: ${scripts.length}</p>`;
                    
                    if (root) {
                        analysis += '<p class="success">‚úÖ Root element exists</p>';
                        const hasContent = root.innerHTML.trim().length > 0;
                        if (hasContent) {
                            analysis += '<p class="success">‚úÖ Root has content - React is rendering!</p>';
                            analysis += `<p class="info">Content length: ${root.innerHTML.length} characters</p>';
                            
                            // Check for specific AI Scholar content
                            const content = root.innerHTML;
                            if (content.includes('AI Scholar') || content.includes('Chat') || content.includes('Navigation')) {
                                analysis += '<p class="success">‚úÖ AI Scholar content detected!</p>';
                            } else {
                                analysis += '<p class="warning">‚ö†Ô∏è AI Scholar content not detected</p>';
                            }
                        } else {
                            analysis += '<p class="error">‚ùå Root element is empty - React not rendering</p>';
                            analysis += '<p class="warning">Possible causes:</p>';
                            analysis += '<ul>';
                            analysis += '<li>JavaScript errors preventing React mount</li>';
                            analysis += '<li>Missing dependencies or import errors</li>';
                            analysis += '<li>Build configuration issues</li>';
                            analysis += '</ul>';
                        }
                    } else {
                        analysis += '<p class="error">‚ùå Root element not found</p>';
                    }
                    
                    // Check scripts
                    analysis += '<h4>JavaScript Loading:</h4>';
                    scripts.forEach((script, index) => {
                        if (script.src) {
                            analysis += `<p class="info">Script ${index + 1}: ${script.src.split('/').pop()}</p>`;
                        }
                    });
                    
                    document.getElementById('analysis-results').innerHTML = analysis;
                    
                } catch (error) {
                    document.getElementById('analysis-results').innerHTML = `
                        <h3 class="error">‚ùå Analysis Error</h3>
                        <p class="error">Error: ${error.message}</p>
                        <p class="warning">This might be due to cross-origin restrictions.</p>
                    `;
                }
            }, 3000);
        }

        function testBasicReact() {
            updateResults('Testing basic React functionality...');
            // This would trigger a basic React test
        }

        function testRAGOnly() {
            updateResults('Testing RAG-only version...');
            // This would test just the RAG component
        }

        function testMinimal() {
            updateResults('Testing minimal version...');
            // This would test the minimal working version
        }

        function updateResults(message) {
            const results = document.getElementById('analysis-results');
            results.innerHTML += `<p class="info">${new Date().toLocaleTimeString()}: ${message}</p>`;
        }

        // Initial load check
        setTimeout(() => {
            const checklist = document.getElementById('checklist');
            checklist.innerHTML = `
                <h3>üîç Initial Checks</h3>
                <p class="success">‚úÖ Debug page loaded</p>
                <p class="success">‚úÖ HTML structure correct</p>
                <p class="success">‚úÖ SEO meta tags present</p>
                <p class="info">üìã Ready for detailed analysis</p>
                <p class="warning">‚ö†Ô∏è Click "Analyze DOM" to check React rendering</p>
            `;
        }, 1000);

        // Auto-analyze after 5 seconds
        setTimeout(analyzeDOM, 5000);
    </script>
</body>
</html>
# Production Environment Configuration for Zotero Integration
# This file contains production-specific environment variables

# Application Environment
NODE_ENV=production
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# Database Configuration
DB_HOST=${DB_HOST}
DB_PORT=${DB_PORT:-5432}
DB_NAME=${DB_NAME}
DB_USER=${DB_USER}
DB_PASSWORD=${DB_PASSWORD}
DB_SSL_MODE=require
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Redis Configuration
REDIS_URL=${REDIS_URL}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Zotero API Configuration
ZOTERO_CLIENT_ID=${ZOTERO_CLIENT_ID}
ZOTERO_CLIENT_SECRET=${ZOTERO_CLIENT_SECRET}
ZOTERO_REDIRECT_URI=${ZOTERO_REDIRECT_URI}
ZOTERO_API_BASE_URL=https://api.zotero.org
ZOTERO_API_VERSION=3
ZOTERO_API_TIMEOUT=30
ZOTERO_RATE_LIMIT_REQUESTS_PER_SECOND=5
ZOTERO_RATE_LIMIT_BURST=10
ZOTERO_WEBHOOK_SECRET=${ZOTERO_WEBHOOK_SECRET}

# Security Configuration
ZOTERO_ENCRYPTION_KEY=${ZOTERO_ENCRYPTION_KEY}
SECRET_KEY=${SECRET_KEY}
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRATION=3600
CORS_ORIGINS=https://aischolar.com,https://www.aischolar.com
ALLOWED_HOSTS=aischolar.com,www.aischolar.com

# File Storage Configuration
ZOTERO_ATTACHMENT_PATH=/app/data/zotero_attachments
ZOTERO_MAX_FILE_SIZE=52428800
ZOTERO_ALLOWED_FILE_TYPES=.pdf,.doc,.docx,.txt,.html,.epub
ZOTERO_STORAGE_CLEANUP_INTERVAL=604800
ZOTERO_COMPRESSION_ENABLED=true

# AI Services Configuration
AI_PROVIDER=openai
OPENAI_API_KEY=${OPENAI_API_KEY}
AI_MODEL=gpt-4
AI_MAX_TOKENS=2000
AI_TEMPERATURE=0.3
AI_ANALYSIS_BATCH_SIZE=50
AI_SIMILARITY_THRESHOLD=0.7

# Monitoring and Logging
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
PROMETHEUS_METRICS_ENABLED=true
PROMETHEUS_METRICS_PORT=9090
LOG_FORMAT=json
LOG_FILE_PATH=/app/logs/zotero.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# Email Configuration
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT:-587}
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_USE_TLS=true
FROM_EMAIL=noreply@aischolar.com

# Webhook and Notification Configuration
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}
PAGERDUTY_INTEGRATION_KEY=${PAGERDUTY_INTEGRATION_KEY}
WEBHOOK_TIMEOUT=30
NOTIFICATION_RETRY_ATTEMPTS=3

# Performance Configuration
CELERY_BROKER_URL=${REDIS_URL}/1
CELERY_RESULT_BACKEND=${REDIS_URL}/2
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_SOFT_TIME_LIMIT=300
CELERY_TASK_TIME_LIMIT=600
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# Sync Configuration
ZOTERO_SYNC_BATCH_SIZE=100
ZOTERO_MAX_CONCURRENT_SYNCS=3
ZOTERO_SYNC_INTERVAL=900
ZOTERO_FULL_SYNC_INTERVAL=86400
ZOTERO_SYNC_RETRY_ATTEMPTS=3
ZOTERO_SYNC_RETRY_DELAY=60

# Cache Configuration
CACHE_DEFAULT_TTL=3600
CACHE_SEARCH_TTL=1800
CACHE_LIBRARY_TTL=7200
CACHE_CITATION_TTL=86400
CACHE_MAX_ENTRIES=10000

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=200
RATE_LIMIT_STORAGE_URL=${REDIS_URL}/3

# SSL Configuration
SSL_CERT_PATH=/etc/ssl/certs/aischolar.crt
SSL_KEY_PATH=/etc/ssl/private/aischolar.key
SSL_VERIFY=true
FORCE_HTTPS=true

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}
BACKUP_S3_ACCESS_KEY=${BACKUP_S3_ACCESS_KEY}
BACKUP_S3_SECRET_KEY=${BACKUP_S3_SECRET_KEY}

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_EXTERNAL_APIS=true

# Feature Flags
FEATURE_PDF_PROCESSING=true
FEATURE_ANNOTATION_SYNC=true
FEATURE_GROUP_LIBRARIES=true
FEATURE_COLLABORATION=true
FEATURE_ADVANCED_SEARCH=true
FEATURE_BULK_OPERATIONS=true
FEATURE_AI_ANALYSIS=true
FEATURE_REAL_TIME_SYNC=true

# Limits and Quotas
MAX_LIBRARY_SIZE=50000
MAX_COLLECTIONS=1000
MAX_TAGS_PER_ITEM=100
MAX_ATTACHMENTS_PER_ITEM=10
MAX_ANNOTATION_SIZE=10000
MAX_EXPORT_ITEMS=5000
MAX_CONCURRENT_USERS=1000

# Deployment Configuration
DEPLOYMENT_VERSION=${DEPLOYMENT_VERSION}
BUILD_DATE=${BUILD_DATE}
GIT_COMMIT=${GIT_COMMIT}
DEPLOYMENT_ENVIRONMENT=production
BLUE_GREEN_DEPLOYMENT=true
GRACEFUL_SHUTDOWN_TIMEOUT=30
HEALTH_CHECK_GRACE_PERIOD=60
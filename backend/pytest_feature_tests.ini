[tool:pytest]
# Configuration for feature-specific test suites (Task 9.1)
testpaths = tests
python_files = test_*_comprehensive.py test_feature_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --cov=services
    --cov=api
    --cov=core
    --cov-report=term-missing
    --cov-report=html:htmlcov_features
    --cov-fail-under=75
    --maxfail=10
    --durations=10
markers =
    # Feature-specific test markers
    mobile: Mobile app functionality tests
    mobile_offline: Mobile offline scenario tests
    mobile_device_sim: Mobile device simulation tests
    voice: Voice interface functionality tests
    voice_accuracy: Speech recognition accuracy tests
    voice_multilingual: Multilingual voice support tests
    integration: External service integration tests
    integration_auth: Integration authentication tests
    integration_error: Integration error handling tests
    educational: Educational feature tests
    educational_quiz: Quiz generation tests
    educational_spaced: Spaced repetition tests
    educational_progress: Learning progress tracking tests
    educational_gamification: Gamification feature tests
    educational_outcomes: Learning outcome validation tests
    
    # Test type markers
    unit: Unit tests
    functional: Functional tests
    performance: Performance tests
    slow: Slow running tests (>5 seconds)
    network: Tests requiring network access
    database: Tests requiring database access
    
    # Quality markers
    critical: Critical functionality tests
    regression: Regression tests
    smoke: Smoke tests for basic functionality

# Async test configuration
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Test discovery patterns
collect_ignore = [
    "venv",
    "__pycache__",
    "*.pyc",
    "build",
    "dist"
]

# Timeout configuration
timeout = 300
timeout_method = thread

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Warning filters
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:asyncio
    ignore::RuntimeWarning:pytest_asyncio

# Minimum version requirements
minversion = 6.0